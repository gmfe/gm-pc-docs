import React, { FC } from 'react'
import { Select, SelectProps, ListDataItem } from '@gm-pc/react'
import _ from 'lodash'

interface SelectEnumProps extends SelectProps<number> {
  enumFilter?:
    | number[]
    | ((data: ListDataItem<number>[]) => ListDataItem<number>[])
}

const SelectEnum: FC<SelectEnumProps> = ({ data, enumFilter, ...rest }) => {
  let newData = data
  if (_.isFunction(enumFilter)) {
    newData = enumFilter(data)
  } else if (_.isArray(enumFilter)) {
    newData = _.filter(data, ({ value }) => enumFilter.includes(value))
  }

  return <Select {...rest} data={newData} />
}

export default SelectEnum
export type { SelectEnumProps }
