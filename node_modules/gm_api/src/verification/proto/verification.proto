syntax = "proto3";

package ceres.verification;
option  java_multiple_files = true;
option  go_package          = "code.guanmai.cn/back_end/ceres/verification/proto;proto";

import "./google/api/annotations.proto";

service VerificationService {
    rpc SendCode(SendCodeRequest) returns (SendCodeResponse) {
        option (google.api.http) = {
            post : "/ceres/verification/VerificationService/SendCode"
        };
    }
    rpc CheckCode(CheckCodeRequest) returns (CheckCodeResponse) {}
}

message Status {
    enum Code {
        CODE_UNSPECIFIED = 0;

        CODE_CHECKCODE_INVALID_CODE = 2010001;
    }
}

// 发送渠道
enum SendType {
    SEND_TYPE_UNSPECIFIED = 0;

    SEND_TYPE_SMS = 1;
}

// 验证码类型
enum CodeType {
    CODE_TYPE_UNSPECIFIED = 0;

    CODE_TYPE_ACCOUNT_AUTH = 100;
}

message SendCodeRequest {
    CodeType code_type = 1;
    SendType send_type = 2;
    string   receiver  = 3; // 接收者，语义取决于SendType
}

message SendCodeResponse {
    string code = 1; // 测试用途，返回验证码
}

message CheckCodeRequest {
    CodeType code_type = 1;
    string   receiver  = 2;
    string   code      = 3;
}

message CheckCodeResponse {
}
