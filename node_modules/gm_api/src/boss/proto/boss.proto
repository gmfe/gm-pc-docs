
syntax = "proto3";

package ceres.boss;

option go_package = "code.guanmai.cn/back_end/ceres/boss/proto;proto";

import "./google/api/annotations.proto";
import "./cmd/protoc-gen-dao/proto/dao.proto";
import "./enterprise/proto/enterprise.proto";

service BossService {
    rpc ListPermissionSet(ListPermissionSetRequest) returns (ListPermissionSetResponse) {
        option (google.api.http) = {
            post : "/ceres/boss/BossService/ListPermissionSet"
        };
    };
    rpc CreatePermissionSet(CreatePermissionSetRequest) returns (CreatePermissionSetResponse) {
        option (google.api.http) = {
            post : "/ceres/boss/BossService/CreatePermissionSet"
        };
    };
    rpc UpdatePermissionSet(UpdatePermissionSetRequest) returns (UpdatePermissionSetResponse) {
        option (google.api.http) = {
            post : "/ceres/boss/BossService/UpdatePermissionSet"
        };
    };
    rpc DeletePermissionSet(DeletePermissionSetRequest) returns (DeletePermissionSetResponse) {
        option (google.api.http) = {
            post : "/ceres/boss/BossService/DeletePermissionSet"
        };
    };
}

// 权限集合，用于售后人员方便地给 Group 分配权限
message PermissionSet {
    message Attrs {
        repeated enterprise.Permission permissions = 1; // 权限列表
    }

    option (dao.partition_count) = 1;
    option (dao.model_type)      = TYPE_BOSS_PERMISSION_SET;

    // @inject_tag: gorm:"PRIMARY_KEY"
    uint64 permission_set_id = 1;
    uint64 create_time       = 4; // 创建时间
    uint64 update_time       = 5; // 修改时间
    uint64 delete_time       = 6; // 删除时间，非0表示已删除

    string name  = 20; // 名称
    Attrs  attrs = 21; // 内嵌属性
}

message ListPermissionSetRequest {
    // 空请求。因为 PermissionSet 数量比较少，不需要分页。
}
message ListPermissionSetResponse {
    repeated PermissionSet permission_sets = 1;
}
message CreatePermissionSetRequest {
    PermissionSet permission_set = 1;
}
message CreatePermissionSetResponse {
    PermissionSet permission_set = 1;
}
message UpdatePermissionSetRequest {
    PermissionSet permission_set = 1;
}
message UpdatePermissionSetResponse {
    PermissionSet permission_set = 1;
}
message DeletePermissionSetRequest {
    uint64 permission_set_id = 1;
}
message DeletePermissionSetResponse {
    PermissionSet permission_set = 1;
}