const _ = require('lodash')
const { doProtoWithJson } = require('../util')
const lintMethod = require('./lint_method')
const lintInfo = require('./lint_info')

function lintProto({ protoNested, protoName }) {
  _.forIn(protoNested, (v, k) => {
    // 方法
    if (v.methods) {
      _.forIn(v.methods, (methodInfo, method) => {
        lintMethod(methodInfo, method, protoName)
      })
    }

    // 类型 和 枚举
    if (v.fields || v.values) {
      lintInfo(v, k)
    }
  })
}

doProtoWithJson('lint', lintProto)

// 尽可能多的写规则
